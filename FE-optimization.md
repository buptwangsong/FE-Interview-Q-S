## 前端优化

日后整理，参考：

[前端工程与性能优化](https://github.com/fouber/blog/issues/3)

> 前端是一种远程部署，运行时增量下载的GUI软件

前端应用没有安装过程，其所需程序资源都部署在远程服务器上，用户使用浏览器访问不同的页面来加载不同的资源，随着访问页面的增加，渐进式的将整个程序加载到本地，
`增量下载`是前端在工程上区别于GUI软件的根本原因。

根据`增量原则`，我们应该精心规划每个页面的资源加载策略，使得用户访问那个页面，就能按需加载该页面所需资源，没有访问的页面不加载，加载过的资源可以缓存复用，
最终带来流畅的用户体验

`增量原则`引申出的前端优化技巧几乎成为web性能优化的核心，有加载相关的*按需加载*、*延迟加载*、*预加载*、*请求合并*策略等等，有缓存相关的*浏览器缓存*、
*缓存更新*、*缓存共享*、*非覆盖式发布方案*等等。

1. 禁止使用iframe

* iframe 会阻塞主页面的onload事件

* 搜索引擎的检索程序无法解读这种页面

* iframe 与主页面共享连接池，而浏览器对相同域的链接有数量限制，所以会影响主页面的并行加载

* 如果非得要使用iframe，最好是用js动态的给iframe 设置src 属性，可以绕开以上问题

2. 禁止使用gif图片实现loading效果（降低CPU消耗，提升渲染性能）

3. 使用CSS3代替JS动画（尽可能的避免重绘重排和回流）

4. 对于一些小的图标，可以使用base64编码，减少网路请求。不建议大图片使用，太耗费CPU

5. 页面头部的<script>标签会阻塞页面加载解析与渲染（js线程与渲染线程是共用一个线程的）
  
6. 合理设置缓存（服务器端缓存：CDN，浏览器缓存：强缓存和若缓存）

7. 用innerHTML代替dom操作，减少dom操作次数。

8. 缓存ajax的请求结果，减少请求数

9. 缓存dom的查询结果，减少dom操作

10. 避免使用CSS expression

*统一思路*
> 普通网站优化的统一思路：尽量向前端优化，减少数据库操作，减少磁盘IO
> 向前端优化是指，在不影响功能与体验的前提下，能在浏览器完成的就不要再服务器端完成。
> 能在缓存服务器上取得的就不要到应用服务器



