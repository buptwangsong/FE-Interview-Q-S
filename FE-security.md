## web 安全

日后完善，参考这里：

1. [常见网络攻击](https://segmentfault.com/a/1190000009514661)

2. [大白话谈CSRF和XSS](https://segmentfault.com/a/1190000007059639)

### sql 注入

* 定义：

就是把sql命令插入到表单中提交，或者插入到域名、请求的查询字符串中，最终目的是欺骗服务器来执行一些恶意的SQL命令。

* 防范：

> 永远不要信任用户的输入，要对用户的输入进行校验，可以通过正则表达式，或限制长度，对单引号和双"-"进行转换等。

> 永远不要使用动态拼装SQL，可以使用参数化的SQL或者直接使用存储过程进行数据查询存取。

> 永远不要使用管理员权限的数据库连接，为每个应用使用单独的权限有限的数据库连接。

> 不要把机密信息明文存放，请加密或者hash掉密码和敏感的信息。

### xss

* 定义：

XSS（cross-site scripting）:代码注入的一种，通过向网站写入js脚本来实现攻击，比如，在网页上插入一个连接，诱导用户点击，然后窃取cookie中的用户私密信息。
或者，在论坛中插入一个恶意的表单，当用户提交表单是，将用户信息发送到攻击者的服务器。

* 防范：

> 首先代码里对用户输入的地方和变量都需要仔细检查长度和对”<”,”>”,”;”,”’”等字符做过滤；

> 其次任何内容写到页面之前都必须加以encode，避免不小心把html tag 弄出来。

> 避免直接在cookie 中泄露用户隐私，例如email、密码等等

> 通过使cookie 和系统ip 绑定来降低cookie 泄露后的危险。

> 尽量采用POST 而非GET 提交表单

### cors

* 定义：

CORS（cross-site request forgery）:挟持用户在已登录的web站点上，执行非本意的操作，就是伪造用户来发起请求。


* 防范：

> 规范请求类型：任何资源操作的请求，必须是POST、PUT、DELETE，总之不能是GET

> 检查referer，即检查请求头中的来源网站，从而保证此次请求来源于信任的网站。

> 设置TOKEN：当我访问页面时，服务端会在页面写入一个随机token值,并设置token生命周期。之后我的请求就必须带上此次token值，请求过的token就会失效，无法再用。更加安全性的页面，如登录页面，应该加验证码。





